- 使用TCP实现一个HTTP服务器
- 使用@WebServlet注解而不是web.xml创建servlet
- 使用EmbeddedTomcat，需要导入依赖
    - 依赖的scope设置compile还是Provided
    - 使用provided时，ide设置，运行时加载依赖
    - 设置tomcat绑定端口
    - webapp映射：contextPath和docBase
    - 挂载把编译后的class路径挂载到webApp下的/WEB-INF/classes
- 获取request的各种变量
    - getQueryString
    - getContextPath
    - getCookies
    - getScheme
- sessionId和session
- 获取/绑定/移除user，从session的属性中：
    - req.getSession().getAttribute
    - req.getSession().setAttribute
    - req.getSession().removeAttribute
- 请求重定向：resp.sendRedirect("/")
- 设置cookie：resp.addCookie(cookie)
- jsp：也是servlet，会被编译为servlet
  - 请求转发给jsp的方法：req.getRequestDispatcher("/WEB-INF/user.jsp").forward(req, resp)
- 传统的mvc模型：
    - C: Servlet
    - M: 通过req.setAttribute("user", user)设置model
    - V: jsp文件，Servlet通过请求转发的方式 req.getRequestDispatcher("/WEB-INF/user.jsp").forward(req, resp)
         来把model传递给jsp，jsp再二次处理
    - 弊端：
        - Jsp对页面开发不友好，更好的替代品是模板引擎
        - 需要强制使用Servlet，参数传递不友好
- 更好的mvc进阶原理：
    - modelAndView
    - dispatchServlet：扫描每个包，为每一个controller方法生成对应的getDispatcher和PostDispatcher，
      放入map中, 所有请求走dispatchServlet的doGet和doPost，在里面按照请求路径分配具体的dispatcher去执行invoke方法，等待
      其返回mv，然后用模板引擎取渲染html文件，响应html结果。
    - controller方法返回mv
    - 模板引擎PebbleEngine
        - 原理：接受mv，取到m中的map，替换html模板中的变量，把最终的html响应出去。
        - 模板文件都是html文件
        - 设置模板的前缀和后缀，之后所有controller返回的view都会加前后缀获取真实模板
        - render方法渲染，写入response
- FileServlet处理静态资源
- 使用@WebFilter定义过滤器Filter
    - encodeFilter，为所有请求设置编码格式
    - LogFilter，打印日志Filter
    - AuthFilter，权限Filter，把没有权限的请求重定向到signin    
- 文件上传Controller前加Filter，验证文件完整性
    - 在Filter里读取了输入流，需要伪造输入流传入controller
- 请求缓存CacheFilter，耗时的controller业务前加Filter，创建缓存map，重复的直接从缓存中取，返回
    - 传入controller的resp是伪造的，要捕获controller里的写入的数据，返回到Filter时装入缓存再响应出去
- 使用@WebListener注解创建监听器，事件类型
    - HttpSessionListener，监听HttpSession的创建和销毁事件
    - ServletContextListener， 监听ServletContext的创建和销毁事件
    - ServletRequestListener， 监听ServletRequest请求的创建和销毁事件
    - ServletRequestAttributeListener， 监听ServletRequest请求的属性变化事件，（即调用ServletRequest.set/remove/Attribute()方法）
    - ServletContextAttributeListener， 监听ServletContext的属性变化事件（即调用ServletContext.set/removeAttribute()方法）
  
- 